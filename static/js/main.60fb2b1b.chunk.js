(this["webpackJsonpreact-test-task"]=this["webpackJsonpreact-test-task"]||[]).push([[0],{31:function(t,e,o){},32:function(t,e,o){},33:function(t,e,o){},34:function(t,e,o){},35:function(t,e,o){},36:function(t,e,o){},37:function(t,e,o){"use strict";o.r(e);var n=o(1),c=o(19),a=o.n(c),r=o(7),s=o(2),i=(o(10),o(0)),b=function(){return Object(i.jsxs)("nav",{className:"navbar",children:[Object(i.jsx)(r.c,{to:"/book",exact:!0,className:"navbar-item is-tab",activeClassName:"is-active",children:"Dashboard"}),Object(i.jsx)(r.c,{to:"/addbook",className:"navbar-item is-tab",activeClassName:"is-active",children:"Add a Book"})]})},l=o(9),u=(o(31),function(t){var e=t.book,o=t.onBookDeleted;return Object(i.jsxs)("tr",{className:"Book",children:[Object(i.jsx)("td",{children:e.title}),Object(i.jsx)("td",{children:e.author}),Object(i.jsx)("td",{children:e.category}),Object(i.jsx)("td",{children:e.isbn}),Object(i.jsxs)("td",{children:[Object(i.jsx)(r.b,{className:"Book__button button button--edit",to:"/book/".concat(e.id),children:"EDIT"}),Object(i.jsx)("button",{type:"button",className:"Book__button button button--delete",onClick:function(){o(e.id)},children:"DELETE"})]})]},e.id)}),j=function(t,e){return fetch("".concat("https://books-data-base.herokuapp.com").concat(t),e).then((function(t){return t.json()}))},h=function(t){return e="/books/".concat(t),j(e,{method:"DELETE"});var e};function d(t){return function(t,e){return j(t,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}("/books",t)}var m=function(t){var e=t.id,o=t.title,n=t.author,c=t.category,a=t.isbn;return function(t,e){var o=e.title,n=e.author,c=e.category,a=e.isbn;return j(t,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:o,author:n,category:c,isbn:a})})}("/books/".concat(e),{title:o,author:n,category:c,isbn:a})},f=(o(32),function(){var t=Object(n.useState)([]),e=Object(l.a)(t,2),o=e[0],c=e[1];Object(n.useEffect)((function(){j("/books").then((function(t){return c(t)}))}),[o]);var a=function(t){h(t).then((function(){c((function(e){return e.filter((function(e){return e.id!==t}))}))}))};return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("table",{className:"BooksTable table  is-striped is-narrow is-hoverable",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{className:"BooksTable__title",children:"Title"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Author"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Category"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"ISBN"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Action"})]})}),Object(i.jsx)("tbody",{children:o.map((function(t){return Object(i.jsx)(u,{book:t,books:o,onBookDeleted:a},t.id)}))})]})})}),O=(o(33),function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"Dashboard__title title",children:"Books Table"}),Object(i.jsx)(f,{})]})}),k=o(12),x=o(13),p=(o(34),o(35),function(t){var e=t.errors;return console.log(e),Object(i.jsx)("div",{className:"Errors",children:Object.values(e).map((function(t){return Object(i.jsx)("p",{children:t})}))})}),g=function(t){var e=t.match,o=Object(n.useState)([]),c=Object(l.a)(o,2),a=c[0],r=c[1],b=Object(n.useState)(!1),u=Object(l.a)(b,2),h=u[0],f=u[1],O=Object(n.useState)({title:"",author:"",category:"",isbn:""}),g=Object(l.a)(O,2),v=g[0],N=g[1],y=e.params.bookId,B=Object(s.g)();Object(n.useEffect)((function(){(function(t){return j("/books/".concat(t))})(y).then((function(t){return N(Object(x.a)({},t))})),j("/categories").then((function(t){return r(t)}))}),[]);var T=function(t){y?m(t):d(t),C()},_=Object(n.useMemo)((function(){var t={emptyTitle:v.title?"":"The book title field cannot be blank",emptyAuthor:v.author?"":"The book author field cannot be blank",numberInAuthor:"",noCategory:v.category?"":"Book category not selected",emptyISBN:v.isbn?"":"The book ISBN field cannot be blank",lettersInISBN:"",lengthISBN:""};for(var e in console.log(v.title),v)switch(e){case"title":t.emptyTitle=""===v[e]?"The book title field cannot be blank":"";break;case"author":t.emptyAuthor=""===v[e]?"The book author field cannot be blank":"",t.numberInAuthor=v[e].match(/\d+/g)?"The book author cannot contain numbers":"";break;case"category":t.noCategory=""===v[e]?"Book category not selected":"";break;case"isbn":t.emptyISBN=""===v[e]?"The book ISBN field cannot be blank":"",t.lettersInISBN=v[e].match(/[a-zA-Z]/g)?"The book ISBN cannot contain letters":"",t.lengthISBN=13===v[e].length?"":"The book ISBN field must contain 13 digits"}return t}),[v]),S=function(){var t=0;for(var e in _)_[e].length>0&&t++;return t},I=function(t){t.preventDefault();var e=t.target,o=e.name,n=e.value;N((function(t){return Object(x.a)(Object(x.a)({},t),{},Object(k.a)({},o,n))}))},C=function(){B.replace("/book")};return Object(i.jsxs)("div",{className:"BookForm",children:[Object(i.jsxs)("form",{className:"BookForm__form ",onSubmit:function(t){t.preventDefault(),f(!0),0===S()&&T(v)},children:[Object(i.jsx)("input",{className:"input is-small field is-grouped-centered",name:"title",type:"text",placeholder:"Title of book",value:v.title,onChange:I}),Object(i.jsx)("input",{className:"input is-small field",name:"author",type:"text",placeholder:"Author of book",value:v.author,onChange:I}),Object(i.jsxs)("select",{name:"category",id:"category",className:"BookForm__select select is-small field",onChange:I,value:v.category,children:[Object(i.jsx)("option",{value:"0",hidden:!0,selected:!0,children:"Select category of book"}),a.map((function(t){return Object(i.jsx)("option",{value:t.name,children:t.name},t.id)}))]}),Object(i.jsx)("input",{className:"input is-small field",name:"isbn",type:"text",placeholder:"ISBN of book",value:v.isbn,onChange:I}),Object(i.jsx)("button",{type:"submit",className:"BookForm__button button",children:"Save"})]}),Object(i.jsx)("div",{className:"BookForm__errors errors",children:h&&Object(i.jsx)(p,{errors:_})})]})},v=(o(36),function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(b,{}),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(s.d,{children:[Object(i.jsx)(s.b,{exact:!0,path:"/book",children:Object(i.jsx)(O,{})}),Object(i.jsx)(s.b,{path:"/addbook",component:g}),Object(i.jsx)(s.b,{exact:!0,path:"/book/:bookId",component:g}),Object(i.jsx)(s.a,{path:"/",to:"/book"})]})})]})});a.a.render(Object(i.jsx)(r.a,{children:Object(i.jsx)(v,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.60fb2b1b.chunk.js.map