(this["webpackJsonpreact-test-task"]=this["webpackJsonpreact-test-task"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n(19),a=n.n(c),r=n(8),s=n(2),i=n(0),l=function(){return Object(i.jsxs)("nav",{className:"navbar",children:[Object(i.jsx)(r.c,{to:"/",exact:!0,className:"navbar-item is-tab",children:"Dashboard"}),Object(i.jsx)(r.c,{to:"/addbook",className:"navbar-item is-tab",children:"Add a Book"})]})},b=n(9),u=(n(12),n(31),function(e){var t=e.book,n=e.onBookDeleted;return Object(i.jsxs)("tr",{className:"Book",children:[Object(i.jsx)("td",{children:t.title}),Object(i.jsx)("td",{children:t.author}),Object(i.jsx)("td",{children:t.category}),Object(i.jsx)("td",{children:t.isbn}),Object(i.jsxs)("td",{children:[Object(i.jsx)(r.b,{className:"Book__button button button--edit",to:{pathname:"/editbook",state:{book:t,isEditing:!0}},children:"EDIT"}),Object(i.jsx)("button",{type:"button",className:"Book__button button button--delete",onClick:function(){n(t.id)},children:"DELETE"})]})]},t.id)}),j="https://books-data-base.herokuapp.com",h=function(e,t){return fetch("".concat(j).concat(e),t).then((function(e){return e.json()}))};console.log(fetch("".concat(j,"/books")));var d=function(e){return t="/books/".concat(e),h(t,{method:"DELETE"});var t};function m(e){return function(e,t){return h(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})}("/books",e)}var f=function(e){var t=e.id,n=e.title,o=e.author,c=e.category,a=e.isbn;return function(e,t){var n=t.title,o=t.author,c=t.category,a=t.isbn;return h(e,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:n,author:o,category:c,isbn:a})})}("/books/".concat(t),{title:n,author:o,category:c,isbn:a})},O=(n(32),function(){var e=Object(o.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1];Object(o.useEffect)((function(){h("/books").then((function(e){return c(e)}))}),[n]);var a=function(e){d(e).then((function(){c((function(t){return t.filter((function(t){return t.id!==e}))}))}))};return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("table",{className:"BooksTable table  is-striped is-narrow is-hoverable",children:[Object(i.jsxs)("thead",{children:[Object(i.jsx)("th",{className:"BooksTable__title",children:"Title"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Author"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Category"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"ISBN"}),Object(i.jsx)("th",{className:"BooksTable__title",children:"Action"})]}),Object(i.jsx)("tbody",{children:n.map((function(e){return Object(i.jsx)(u,{book:e,books:n,onBookDeleted:a})}))})]})})}),p=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"title",children:"Books List"}),Object(i.jsx)(O,{})]})},k=n(11),x=n(7),g=(n(33),function(){return h("/categories")}),N=(n(34),function(e){var t=e.errors;return Object(i.jsxs)("div",{className:"ErrorsPlace",children:[Object(i.jsx)("p",{children:t.emptyTitle}),Object(i.jsx)("p",{children:t.emptyAuthor}),Object(i.jsx)("p",{children:t.numberInAuthor}),Object(i.jsx)("p",{children:t.noCategory}),Object(i.jsx)("p",{children:t.emptyISBN}),Object(i.jsx)("p",{children:t.lettersInISBN}),Object(i.jsx)("p",{children:t.lengthISBN})]})}),y=function(){var e=Object(o.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(o.useState)(!1),r=Object(b.a)(a,2),l=r[0],u=r[1],j=Object(o.useState)({title:"",author:"",category:"",ISBN:""}),d=Object(b.a)(j,2),f=d[0],O=d[1],p=Object(s.g)();Object(o.useEffect)((function(){g().then((function(e){return c(e)}))}),[]);var y=function(e){0!==e&&function(e){return h("/categories/".concat(e))}(e).then((function(e){return O(Object(x.a)(Object(x.a)({},f),{},{category:e.name}))}))},v=Object(o.useMemo)((function(){var e={emptyTitle:"",emptyAuthor:"",numberInAuthor:"",noCategory:"",emptyISBN:"",lettersInISBN:"",lengthISBN:""};for(var t in f)switch(t){case"title":e.emptyTitle=""===f[t]?"The book title field cannot be blank":"";break;case"author":e.emptyAuthor=""===f[t]?"The book author field cannot be blank":"",e.numberInAuthor=f[t].match(/\d+/g)?"The book author cannot contain numbers":"";break;case"category":e.noCategory=""===f[t]?"Select book category":"";break;case"ISBN":e.emptyISBN=""===f[t]?"The book ISBN field cannot be blank":"",e.lettersInISBN=f[t].match(/[a-zA-Z]/g)?"The book ISBN cannot contain letters":"",e.lengthISBN=13===f[t].length?"":"The book ISBN field must contain 13 digits"}return e}),[f]),B=function(e){e.preventDefault();var t=e.target,n=t.name,o=t.value;O((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(k.a)({},n,o))}))},S=function(){var e=0;for(var t in v)v[t].length>0&&e++;return e},I=function(e){m({title:e.title,author:e.author,category:e.category,isbn:e.ISBN}),T()},T=function(){return p.replace("/")};return Object(i.jsxs)("div",{className:"AddBook",children:[Object(i.jsxs)("form",{className:"AddBook__form ",onSubmit:function(e){e.preventDefault(),u(!0),0===S()&&I(Object(x.a)({},f))},children:[Object(i.jsx)("input",{className:"input is-small field is-grouped-centered",name:"title",type:"text",placeholder:"Title of book",value:f.title,onChange:B}),Object(i.jsx)("input",{className:"input is-small field",name:"author",type:"text",placeholder:"Author of book",value:f.author,onChange:B}),Object(i.jsxs)("select",{name:"category",id:"category",className:"AddBook__select select is-small field",onChange:function(e){return y(+e.target.value)},children:[Object(i.jsx)("option",{value:"0",hidden:!0,selected:!0,children:"Select category of book"}),n.map((function(e){return Object(i.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(i.jsx)("input",{className:"input is-small field",name:"ISBN",type:"text",placeholder:"ISBN of book",value:f.ISBN,onChange:B}),Object(i.jsx)("button",{type:"submit",className:"AddBook__button button",children:"Add book"})]}),Object(i.jsx)("div",{className:"AddBook__errors errors",children:l&&Object(i.jsx)(N,{errors:v})})]})},v=(n(35),function(){var e=Object(s.h)().state.book,t=Object(o.useState)([]),n=Object(b.a)(t,2),c=n[0],a=n[1],r=Object(o.useState)(!1),l=Object(b.a)(r,2),u=l[0],j=l[1],h=Object(o.useState)({title:e.title,author:e.author,category:e.category,isbn:e.isbn}),d=Object(b.a)(h,2),m=d[0],O=d[1],p=Object(s.g)();Object(o.useEffect)((function(){g().then((function(e){return a(e)}))}),[]);var y=function(t){v(Object(x.a)(Object(x.a)({},e),t)),T()},v=function(e){f(e)},B=Object(o.useMemo)((function(){var e={emptyTitle:"",emptyAuthor:"",numberInAuthor:"",noCategory:"",emptyISBN:"",lettersInISBN:"",lengthISBN:""};for(var t in m)switch(t){case"title":e.emptyTitle=""===m[t]?"The book title field cannot be blank":"";break;case"author":e.emptyAuthor=""===m[t]?"The book author field cannot be blank":"",e.numberInAuthor=m[t].match(/\d+/g)?"The book author cannot contain numbers":"";break;case"category":e.noCategory=""===m[t]?"Select book category":"";break;case"isbn":e.emptyISBN=""===m[t]?"The book ISBN field cannot be blank":"",e.lettersInISBN=m[t].match(/[a-zA-Z]/g)?"The book ISBN cannot contain letters":"",e.lengthISBN=13===m[t].length?"":"The book ISBN field must contain 13 digits"}return e}),[m]),S=function(e){e.preventDefault();var t=e.target,n=t.name,o=t.value;O((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(k.a)({},n,o))}))},I=function(){var e=0;for(var t in B)B[t].length>0&&e++;return e},T=function(){return p.replace("/")};return Object(i.jsxs)("div",{className:"AddBook",children:[Object(i.jsxs)("form",{className:"AddBook__form ",onSubmit:function(e){e.preventDefault(),j(!0),0===I()&&y(m)},children:[Object(i.jsx)("input",{className:"input is-small field is-grouped-centered",name:"title",type:"text",placeholder:"Title of book",value:m.title,onChange:S}),Object(i.jsx)("input",{className:"input is-small field",name:"author",type:"text",placeholder:"Author of book",value:m.author,onChange:S}),Object(i.jsxs)("select",{name:"category",id:"category",className:"AddBook__select select is-small field",onChange:S,value:m.category,children:[Object(i.jsx)("option",{value:"0",hidden:!0,selected:!0,children:"Select category of book"}),c.map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name},e.id)}))]}),Object(i.jsx)("input",{className:"input is-small field",name:"isbn",type:"text",placeholder:"ISBN of book",value:m.isbn,onChange:S}),Object(i.jsx)("button",{type:"submit",className:"AddBook__button button",children:"Save"})]}),Object(i.jsx)("div",{className:"AddBook__errors errors",children:u&&Object(i.jsx)(N,{errors:B})})]})}),B=(n(36),function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(l,{}),Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)(s.d,{children:[Object(i.jsx)(s.b,{exact:!0,path:"/",children:Object(i.jsx)(p,{})}),Object(i.jsx)(s.b,{path:"/addbook",component:y}),Object(i.jsx)(s.b,{path:"/editbook",component:v}),Object(i.jsx)(s.a,{path:"/home",to:"/"})]})})]})});a.a.render(Object(i.jsx)(r.a,{children:Object(i.jsx)(B,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.ea3517bf.chunk.js.map