(this["webpackJsonpreact-test-task"]=this["webpackJsonpreact-test-task"]||[]).push([[0],{27:function(e,t,o){},28:function(e,t,o){},29:function(e,t,o){},30:function(e,t,o){},31:function(e,t,o){},32:function(e,t,o){},33:function(e,t,o){"use strict";o.r(t);var c=o(1),a=o(15),s=o.n(a),n=o(7),l=o(2),r=(o(9),o(0));const b=()=>Object(r.jsxs)("nav",{className:"navbar",children:[Object(r.jsx)(n.c,{to:"/book",exact:!0,className:"navbar-item is-tab",activeClassName:"is-active",children:"Dashboard"}),Object(r.jsx)(n.c,{to:"/addbook",className:"navbar-item is-tab",activeClassName:"is-active",children:"Add a Book"})]});o(27);const i=e=>{let{book:t,onBookDeleted:o}=e;return Object(r.jsxs)("tr",{className:"Book",children:[Object(r.jsx)("td",{children:t.title}),Object(r.jsx)("td",{children:t.author}),Object(r.jsx)("td",{children:t.category}),Object(r.jsx)("td",{children:t.isbn}),Object(r.jsxs)("td",{children:[Object(r.jsx)(n.b,{className:"Book__button button button--edit",to:"/book/".concat(t.id),children:"EDIT"}),Object(r.jsx)("button",{type:"button",className:"Book__button button button--delete",onClick:()=>{o(t.id)},children:"DELETE"})]})]},t.id)},h=(e,t)=>fetch("".concat("https://books-database-36ba8aef5296.herokuapp.com").concat(e),t).then((e=>e.json())),j=e=>{return t="/books/".concat(e),h(t,{method:"DELETE"});var t};function d(e){return((e,t)=>h(e,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}))("/books",e)}const u=e=>{let{id:t,title:o,author:c,category:a,isbn:s}=e;return((e,t)=>{let{title:o,author:c,category:a,isbn:s}=t;return h(e,{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:o,author:c,category:a,isbn:s})})})("/books/".concat(t),{title:o,author:c,category:a,isbn:s})};o(28);const m=()=>{const[e,t]=Object(c.useState)([]);Object(c.useEffect)((()=>{h("/books").then((e=>t([...e])))}),[e]);const o=e=>{j(e).then((()=>{t((t=>t.filter((t=>t.id!==e))))}))};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("table",{className:"BooksTable table  is-striped is-narrow is-hoverable",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{className:"BooksTable__title",children:"Title"}),Object(r.jsx)("th",{className:"BooksTable__title",children:"Author"}),Object(r.jsx)("th",{className:"BooksTable__title",children:"Category"}),Object(r.jsx)("th",{className:"BooksTable__title",children:"ISBN"}),Object(r.jsx)("th",{className:"BooksTable__title",children:"Action"})]})}),Object(r.jsx)("tbody",{children:e.map((t=>Object(r.jsx)(i,{book:t,books:e,onBookDeleted:o},t.id)))})]})})};o(29);const k=()=>Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{className:"Dashboard__title title",children:"Books Table"}),Object(r.jsx)(m,{})]});o(30);o(31);const O=e=>{let{errors:t}=e;return console.log(t),Object(r.jsx)("div",{className:"Errors",children:Object.values(t).map((e=>Object(r.jsx)("p",{children:e})))})},x=e=>{let{match:t}=e;const[o,a]=Object(c.useState)([]),[s,n]=Object(c.useState)(!1),[b,i]=Object(c.useState)({title:"",author:"",category:"",isbn:""}),j=t.params.bookId,m=Object(l.g)();Object(c.useEffect)((()=>{(e=>h("/books/".concat(e)))(j).then((e=>i({...e}))),h("/categories").then((e=>a(e)))}),[]);const k=e=>{j?u(e):d(e),N()},x=Object(c.useMemo)((()=>{const e={emptyTitle:b.title?"":"The book title field cannot be blank",emptyAuthor:b.author?"":"The book author field cannot be blank",numberInAuthor:"",noCategory:b.category?"":"Book category not selected",emptyISBN:b.isbn?"":"The book ISBN field cannot be blank",lettersInISBN:"",lengthISBN:""};console.log(b.title);for(let t in b)switch(t){case"title":e.emptyTitle=""===b[t]?"The book title field cannot be blank":"";break;case"author":e.emptyAuthor=""===b[t]?"The book author field cannot be blank":"",e.numberInAuthor=b[t].match(/\d+/g)?"The book author cannot contain numbers":"";break;case"category":e.noCategory=""===b[t]?"Book category not selected":"";break;case"isbn":e.emptyISBN=""===b[t]?"The book ISBN field cannot be blank":"",e.lettersInISBN=b[t].match(/[a-zA-Z]/g)?"The book ISBN cannot contain letters":"",e.lengthISBN=13===b[t].length?"":"The book ISBN field must contain 13 digits"}return e}),[b]),p=()=>{let e=0;for(const t in x)x[t].length>0&&e++;return e},g=e=>{e.preventDefault();const{name:t,value:o}=e.target;i((e=>({...e,[t]:o})))},N=()=>{m.replace("/book")};return Object(r.jsxs)("div",{className:"BookForm",children:[Object(r.jsxs)("form",{className:"BookForm__form ",onSubmit:e=>{e.preventDefault(),n(!0),0===p()&&k(b)},children:[Object(r.jsx)("input",{className:"input is-small field is-grouped-centered",name:"title",type:"text",placeholder:"Title of book",value:b.title,onChange:g}),Object(r.jsx)("input",{className:"input is-small field",name:"author",type:"text",placeholder:"Author of book",value:b.author,onChange:g}),Object(r.jsxs)("select",{name:"category",id:"category",className:"BookForm__select select is-small field",onChange:g,value:b.category,children:[Object(r.jsx)("option",{value:"0",hidden:!0,selected:!0,children:"Select category of book"}),o.map((e=>Object(r.jsx)("option",{value:e.name,children:e.name},e.id)))]}),Object(r.jsx)("input",{className:"input is-small field",name:"isbn",type:"text",placeholder:"ISBN of book",value:b.isbn,onChange:g}),Object(r.jsx)("button",{type:"submit",className:"BookForm__button button",children:"Save"})]}),Object(r.jsx)("div",{className:"BookForm__errors errors",children:s&&Object(r.jsx)(O,{errors:x})})]})};o(32);var p=()=>Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b,{}),Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{exact:!0,path:"/book",children:Object(r.jsx)(k,{})}),Object(r.jsx)(l.b,{path:"/addbook",component:x}),Object(r.jsx)(l.b,{exact:!0,path:"/book/:bookId",component:x}),Object(r.jsx)(l.a,{path:"/",to:"/book"})]})})]});s.a.render(Object(r.jsx)(n.a,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.f3925576.chunk.js.map